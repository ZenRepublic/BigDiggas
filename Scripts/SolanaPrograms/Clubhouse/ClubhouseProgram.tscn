[gd_scene load_steps=3 format=3 uid="uid://d06uexibndcy6"]

[ext_resource type="Script" path="res://Scripts/SolanaPrograms/Clubhouse/clubhouse_program.gd" id="1_ga3ja"]
[ext_resource type="JSON" path="res://Scripts/SolanaPrograms/Clubhouse/clubhouse.json" id="2_hn8ct"]

[node name="ClubhouseProgram" type="Node"]
script = ExtResource("1_ga3ja")

[node name="AnchorProgram" type="AnchorProgram" parent="."]
pid = "C1ubCwnK75ExARi8BoVzAvREDG29wJKyiwnf1hC8rgBU"
json_file = ExtResource("2_hn8ct")
idl = {
"accounts": [{
"docs": ["If the admin is set, the program will check if the caller is the admin, otherwise it should check if the caller is the program authority"],
"name": "ProgramAdminProof",
"type": {
"fields": [{
"name": "admin",
"type": {
"option": "publicKey"
}
}],
"kind": "struct"
}
}, {
"name": "Club",
"type": {
"fields": [{
"name": "house",
"type": "publicKey"
}, {
"name": "managerMint",
"type": "publicKey"
}, {
"name": "collectionIdentifier",
"type": {
"defined": "CollectionIdentifier"
}
}, {
"name": "metadataMint",
"type": {
"option": "publicKey"
}
}, {
"name": "rewardMint",
"type": "publicKey"
}, {
"name": "rewardMintDecimals",
"type": "u8"
}, {
"name": "isActive",
"type": "bool"
}, {
"name": "memberCount",
"type": "u32"
}, {
"name": "activeTrainings",
"type": "u32"
}, {
"name": "activeMatches",
"type": "u32"
}, {
"name": "reserved",
"type": {
"array": ["u8", 128.0]
}
}, {
"name": "trainingConfig",
"type": {
"defined": "TrainingConfig"
}
}, {
"name": "reservedTraining",
"type": {
"array": ["u8", 64.0]
}
}, {
"name": "matchConfig",
"type": {
"defined": "MatchConfig"
}
}, {
"name": "reservedMatch",
"type": {
"array": ["u8", 64.0]
}
}],
"kind": "struct"
}
}, {
"name": "Campaign",
"type": {
"fields": [{
"name": "house",
"type": "publicKey"
}, {
"name": "collection",
"type": "publicKey"
}, {
"name": "manager",
"type": "publicKey"
}, {
"name": "metadataMint",
"type": {
"option": "publicKey"
}
}, {
"name": "rewardMint",
"type": "publicKey"
}, {
"name": "rewardMintDecimals",
"type": "u8"
}, {
"name": "memberCount",
"type": "u32"
}, {
"name": "activeGames",
"type": "u32"
}, {
"name": "totalGames",
"type": "u32"
}, {
"name": "timeSpan",
"type": {
"defined": "TimeSpan"
}
}, {
"name": "houseConfigSnapshot",
"type": {
"defined": "HouseConfig"
}
}, {
"name": "nftEnergyConfig",
"type": {
"option": {
"defined": "NftEnergyConfig"
}
}
}, {
"name": "tokenEnergyConfig",
"type": {
"option": {
"defined": "TokenEnergyConfig"
}
}
}, {
"name": "reserved",
"type": {
"array": ["u64", 16.0]
}
}, {
"name": "campaignName",
"type": "string"
}],
"kind": "struct"
}
}, {
"name": "Match",
"type": {
"fields": [{
"name": "club",
"type": "publicKey"
}, {
"name": "membersJoined",
"type": "u8"
}, {
"name": "wager",
"type": "u64"
}, {
"name": "startTime",
"type": "i64"
}, {
"name": "reserved",
"type": {
"array": ["u8", 64.0]
}
}],
"kind": "struct"
}
}, {
"name": "Duel",
"type": {
"fields": [{
"name": "bump",
"type": "u8"
}, {
"name": "clubMemberA",
"type": "publicKey"
}, {
"name": "aIsReady",
"type": "bool"
}, {
"name": "clubMemberB",
"type": "publicKey"
}, {
"name": "bIsReady",
"type": "bool"
}, {
"name": "wager",
"type": "u64"
}, {
"name": "startTime",
"type": "i64"
}],
"kind": "struct"
}
}, {
"name": "MatchConnection",
"type": {
"fields": [{
"name": "gameMatch",
"type": "publicKey"
}, {
"name": "clubMember",
"type": "publicKey"
}],
"kind": "struct"
}
}, {
"name": "House",
"type": {
"fields": [{
"name": "houseName",
"type": {
"array": ["u8", 32.0]
}
}, {
"name": "houseAdmin",
"type": "publicKey"
}, {
"docs": ["to create CAMPAIGNS"],
"name": "managerCollection",
"type": {
"option": "publicKey"
}
}, {
"docs": ["paid to create CAMPAIGNS"],
"name": "houseCurrency",
"type": "publicKey"
}, {
"docs": ["currency decimals"],
"name": "houseCurrencyDecimals",
"type": "u8"
}, {
"docs": ["currently active campaigns"],
"name": "totalCampaigns",
"type": "u32"
}, {
"docs": ["currently active campaigns"],
"name": "activeCampaigns",
"type": "u16"
}, {
"docs": ["unique players in house"],
"name": "uniquePlayers",
"type": "u32"
}, {
"docs": ["total games played in house"],
"name": "gamesPlayed",
"type": "u32"
}, {
"docs": ["creation fees collected total"],
"name": "unclaimedCreationFees",
"type": "u64"
}, {
"docs": ["house fees pending withdrawal"],
"name": "unclaimedHouseFees",
"type": "u64"
}, {
"docs": ["house fees pending withdrawal"],
"name": "isActive",
"type": "bool"
}, {
"name": "reserved1",
"type": {
"array": ["u64", 13.0]
}
}, {
"name": "config",
"type": {
"defined": "HouseConfig"
}
}, {
"name": "reserved2",
"type": {
"array": ["u64", 16.0]
}
}],
"kind": "struct"
}
}, {
"name": "Activity",
"type": {
"fields": [{
"name": "house",
"type": "publicKey"
}, {
"name": "nativeMint",
"type": {
"option": "publicKey"
}
}, {
"name": "minimumParticipants",
"type": "u8"
}, {
"name": "maximumParticipants",
"type": "u8"
}, {
"name": "energyRechargeMinutes",
"type": "i64"
}, {
"name": "burnRemainingTokens",
"type": "bool"
}],
"kind": "struct"
}
}, {
"name": "CampaignPlayer",
"type": {
"fields": [{
"name": "mint",
"type": "publicKey"
}, {
"name": "club",
"type": "publicKey"
}, {
"name": "energy",
"type": "u8"
}, {
"name": "rechargeStartTime",
"type": "i64"
}, {
"name": "trainingsPlayed",
"type": "u32"
}, {
"name": "matchesPlayed",
"type": "u32"
}, {
"name": "inTraining",
"type": "bool"
}, {
"name": "inMatch",
"type": "bool"
}, {
"name": "currentActivity",
"type": {
"option": "publicKey"
}
}, {
"name": "reserved",
"type": {
"array": ["u8", 32.0]
}
}],
"kind": "struct"
}
}],
"errors": [{
"code": 6000.0,
"msg": "Signer does not match program authority",
"name": "ProgramAuthorityMismatch"
}, {
"code": 6001.0,
"msg": "Collection Proof is invalid",
"name": "CollectionProofInvalid"
}, {
"code": 6002.0,
"msg": "Collection Key Mismatch",
"name": "CollectionKeyMismatch"
}, {
"code": 6003.0,
"msg": "Caller does not own the token account",
"name": "TokenOwnerMismatch"
}, {
"code": 6004.0,
"msg": "Caller does not own the NFT",
"name": "OwnerBalanceMismatch"
}, {
"code": 6005.0,
"msg": "Mint is not an NFT",
"name": "MintNotNft"
}, {
"code": 6006.0,
"msg": "Energy depleted",
"name": "OutOfEnergy"
}, {
"code": 6007.0,
"msg": "Energy calculation failed",
"name": "EnergyCalculationFailed"
}, {
"code": 6008.0,
"msg": "Club inactive",
"name": "ClubInactive"
}, {
"code": 6009.0,
"msg": "Invalid input",
"name": "InvalidInput"
}, {
"code": 6010.0,
"msg": "Metadata does not match mint",
"name": "MetadataMismatch"
}, {
"code": 6011.0,
"msg": "Tax above 100%",
"name": "TaxTooHigh"
}, {
"code": 6012.0,
"msg": "Insufficient funds",
"name": "InsufficientFunds"
}, {
"code": 6013.0,
"msg": "No Authority",
"name": "NotClubAdmin"
}, {
"code": 6014.0,
"msg": "Player already in a match",
"name": "PlayerAlreadyInMatch"
}, {
"code": 6015.0,
"msg": "Too low wager",
"name": "TooLowWager"
}, {
"code": 6016.0,
"msg": "The house name cannot be longer than 32 bytes",
"name": "InvalidHouseNameLength"
}, {
"code": 6017.0,
"msg": "The house name cannot be shorted than 4 bytes",
"name": "HouseNameTooShort"
}, {
"code": 6018.0,
"msg": "The house name cannot have special characters",
"name": "InvalidHouseName"
}, {
"code": 6019.0,
"msg": "The vault must be empty",
"name": "NonZeroVault"
}, {
"code": 6020.0,
"msg": "Active campaigns exist",
"name": "ActiveCampaigns"
}],
"instructions": [{
"accounts": [{
"isMut": true,
"isSigner": true,
"name": "programAdmin"
}, {
"isMut": true,
"isSigner": false,
"name": "house"
}, {
"isMut": true,
"isSigner": false,
"name": "houseCurrencyVault"
}, {
"isMut": false,
"isSigner": false,
"name": "houseAdmin"
}, {
"isMut": false,
"isSigner": false,
"name": "houseCurrencyMint"
}, {
"isMut": false,
"isSigner": false,
"name": "tokenProgram"
}, {
"isMut": false,
"isSigner": false,
"name": "systemProgram"
}],
"args": [{
"name": "managerCollection",
"type": {
"option": "publicKey"
}
}, {
"name": "houseConfig",
"type": {
"defined": "HouseConfig"
}
}, {
"name": "houseName",
"type": "bytes"
}],
"name": "createHouse"
}, {
"accounts": [{
"isMut": true,
"isSigner": false,
"name": "house"
}, {
"isMut": false,
"isSigner": true,
"name": "houseAdmin"
}],
"args": [{
"name": "houseConfig",
"type": {
"defined": "HouseConfig"
}
}],
"name": "updateHouse"
}, {
"accounts": [{
"isMut": true,
"isSigner": false,
"name": "house"
}, {
"isMut": false,
"isSigner": true,
"name": "houseAdmin"
}, {
"isMut": true,
"isSigner": false,
"name": "houseCurrencyVault"
}, {
"isMut": false,
"isSigner": false,
"name": "tokenProgram"
}, {
"isMut": false,
"isSigner": false,
"name": "systemProgram"
}],
"args": [],
"name": "deleteHouse"
}, {
"accounts": [{
"isMut": true,
"isSigner": true,
"name": "signer"
}, {
"isMut": false,
"isSigner": false,
"name": "programAdmin"
}, {
"isMut": false,
"isSigner": false,
"name": "programData"
}, {
"isMut": true,
"isSigner": false,
"name": "programAdminProof"
}, {
"isMut": false,
"isSigner": false,
"name": "systemProgram"
}],
"args": [],
"name": "addProgramAdmin"
}],
"metadata": {
"address": "C1ubCwnK75ExARi8BoVzAvREDG29wJKyiwnf1hC8rgBU"
},
"name": "clubhouse",
"types": [{
"name": "NftEnergyConfig",
"type": {
"fields": [{
"name": "maxClubMemberEnergy",
"type": "u8"
}, {
"name": "energyRechargeMinutes",
"type": "i64"
}],
"kind": "struct"
}
}, {
"name": "TokenEnergyConfig",
"type": {
"fields": [{
"name": "energyPrice",
"type": "u64"
}],
"kind": "struct"
}
}, {
"name": "CampaignConstants",
"type": {
"fields": [{
"name": "minGameDuration",
"type": "i64"
}, {
"name": "maxGameDuration",
"type": "i64"
}],
"kind": "struct"
}
}, {
"name": "Duration",
"type": {
"fields": [{
"name": "minDuration",
"type": "i64"
}, {
"name": "maxDuration",
"type": "i64"
}],
"kind": "struct"
}
}, {
"name": "TimeSpan",
"type": {
"fields": [{
"name": "startTime",
"type": "i64"
}, {
"name": "endTime",
"type": "i64"
}],
"kind": "struct"
}
}, {
"name": "WagerConfig",
"type": {
"fields": [{
"name": "minimumWager",
"type": "u64"
}, {
"name": "maximumWager",
"type": "u64"
}, {
"docs": ["payout percent - percentage of the wager that is paid out to the winner"],
"name": "wagerPayoutPercent",
"type": "u8"
}, {
"docs": ["burn percent - percentage of the wager that is burned"],
"name": "wagerBurnPercent",
"type": "u8"
}, {
"docs": ["tax percent - percentage of the wager that is paid to the house"],
"name": "wagerTaxPercent",
"type": "u8"
}],
"kind": "struct"
}
}, {
"name": "TrainingConfig",
"type": {
"fields": [{
"name": "maxRewardsPerTraining",
"type": "u64"
}, {
"name": "maxClubMemberEnergy",
"type": "u8"
}, {
"name": "energyRechargeMinutes",
"type": "i64"
}, {
"name": "burnRemainingTokens",
"type": "bool"
}],
"kind": "struct"
}
}, {
"name": "HouseConfig",
"type": {
"fields": [{
"name": "oracleKey",
"type": "publicKey"
}, {
"name": "campaignCreationFee",
"type": "u64"
}, {
"name": "campaignManagerDiscount",
"type": "u64"
}, {
"name": "claimFee",
"type": "u64"
}, {
"name": "rewardsTax",
"type": "u64"
}],
"kind": "struct"
}
}, {
"name": "MatchConfig",
"type": {
"fields": [{
"name": "winTaxBasisPoints",
"type": "u64"
}, {
"name": "matchMinDeposit",
"type": "u64"
}],
"kind": "struct"
}
}, {
"docs": ["Identifier of the collection"],
"name": "CollectionIdentifier",
"type": {
"kind": "enum",
"variants": [{
"fields": [{
"name": "pubkey",
"type": "publicKey"
}],
"name": "Collection"
}, {
"fields": [{
"name": "pubkey",
"type": "publicKey"
}],
"name": "Creator"
}]
}
}],
"version": "0.1.0"
}
